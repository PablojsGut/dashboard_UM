<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard VcM - Modular</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="style/main.css">
</head>
<body>
    <header class="header-um">
        <div class="container">
            <div class="row align-items-center">
                <div class="col text-center text-md-start">
                    <h1 class="dashboard-title">
                        üìä Dashboard Vinculaci√≥n con el Medio
                    </h1>
                    <p class="dashboard-subtitle">
                        Gesti√≥n y seguimiento de iniciativas v√≠a Excel
                    </p>
                </div>
            </div>
        </div>
    </header>

    <!-- EXCEL -->
    <div class="container mb-3">
        <div class="card p-3 shadow-sm">

            <h5 class="fw-semibold mb-3">
                üìä Carga de Excel ‚Äì Ambas Fases
            </h5>

            <!-- EXCEL FASE 1 -->
            <div class="mb-3">
                <label class="form-label fw-semibold">
                    üìÑ Excel Iniciativas (Fase 1)
                </label>
                <input
                    type="file"
                    id="excelInputAmbasFase1"
                    class="form-control w-auto"
                    accept=".xlsx,.xls"
                >
            </div>

            <!-- EXCEL FASE 2 -->
            <div class="mb-3">
                <label class="form-label fw-semibold">
                    üìÑ Excel S√≠ntesis (Fase 2)
                </label>
                <input
                    type="file"
                    id="excelInputAmbasFase2"
                    class="form-control w-auto"
                    accept=".xlsx,.xls"
                >
            </div>

            <!-- BOT√ìN -->
            <button class="btn btn-success mt-3" onclick="exportExcelUnido()">
                ‚¨áÔ∏è Descargar Excel Unificado
            </button>

            <small class="text-muted mt-3 d-block">
                Debes cargar ambos archivos para generar el Excel unificado.
            </small>

        </div>
    </div>

    <!-- ALERTA -->
    <div class="container mt-3">
        <div id="alertsContainer"></div>
    </div>

    <!-- FILTROS -->
    <div class="container filters-section mb-4">
        <div class="filters-title mb-3">
            üîç Filtros Globales
        </div>

        <div class="row g-3">
            <!-- Sede -->
            <div class="col-12 col-md-6 col-lg-3">
                <label for="filterSede" class="form-label">Sede</label>
                <select id="filterSede" class="form-select">
                    <option value="">Todas las sedes</option>
                    <option value="Santiago">Santiago</option>
                    <option value="Temuco">Temuco</option>
                </select>
            </div>

            <!-- Dependencia -->
            <div class="col-12 col-md-6 col-lg-3">
                <label for="filterDependencia" class="form-label">Dependencia</label>
                <select id="filterDependencia" class="form-select">
                    <option value="">Todas las dependencias</option>
                </select>
            </div>

            <!-- Unidad Acad√©mica -->
            <div class="col-12 col-md-6 col-lg-3">
                <label for="filterUnidad" class="form-label">
                    Unidad Acad√©mica
                    <span class="text-muted small">(Pregrado / Postgrado)</span>
                </label>
                <select id="filterUnidad" class="form-select">
                    <option value="">Todas las unidades</option>
                </select>
            </div>
        </div>

        <!-- BOTONES -->
        <div class="d-flex flex-wrap gap-2 mt-4">
            <button class="btn btn-primary" onclick="applyFilters()" >
                ‚úì Aplicar Filtros
            </button>
            <button class="btn btn-outline-secondary" onclick="clearFilters()">
                ‚Üª Limpiar Filtros
            </button>
        </div>
    </div>

    <!-- DATOS -->
    <div class="container">
        <div class="kpis-grid" id="kpisContainer"></div>
    </div>

    <!-- GR√ÅFICOS -->
    <div class="container mt-4">

        <div class="row g-4 justify-content-center">

            <!-- Avance Fase -->
            <div class="col-12 col-lg-8">
                <div class="chart-card">
                    <canvas id="chartAvanceFase"></canvas>
                </div>
            </div>

            <!-- Estado Iniciativas -->
            <div class="col-12 col-md-6 col-lg-4">
                <div class="chart-card">
                    <canvas id="chartEstadoIniciativas"></canvas>
                </div>
            </div>

            <!-- Estado S√≠ntesis -->
            <div class="col-12 col-md-6 col-lg-4">
                <div class="chart-card">
                    <canvas id="chartEstadoSintesis"></canvas>
                </div>
            </div>

                <!-- INICIATIVAS POR MES -->
            <div class="container mt-4">
                <h5 class="text-center">Iniciativas enviadas por mes</h5>
                <div id="chartsIniciativasPorMes"></div>
            </div>

            <!-- S√çNTESIS POR MES -->
            <div class="container mt-4">
                <h5 class="text-center">S√≠ntesis enviadas por mes</h5>
                <div id="chartsSintesisPorMes"></div>
            </div>

        </div>
    </div>




    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="js/columnsConfig.js"></script>
    <script src="js/excelValidator.js"></script>
    <script src="js/alert.js"></script>
    <script src="js/excelLogic.js"></script>
    <script src="js/excelExport.js"></script>
    <script src="js/kpis.js"></script>
    <script src="js/dependenciasView.js"></script>
    <script src="js/filtersLogic.js"></script>
    <script src="js/chartsLogic.js"></script>
</body>
</html>